# Weather Agent with Generative UI

åŸºäº LangGraph æ„å»ºçš„æ™ºèƒ½å¤©æ°” Agentï¼Œå…·å¤‡ Generative UI åŠŸèƒ½ï¼Œæ”¯æŒè‡ªç„¶è¯­è¨€äº¤äº’å’ŒåŠ¨æ€ React ç»„ä»¶ç”Ÿæˆã€‚

## ğŸŒŸ æ ¸å¿ƒç‰¹æ€§

- âœ… **æ™ºèƒ½æ¶ˆæ¯è§£æ** - ä»ç”¨æˆ·è‡ªç„¶è¯­è¨€ä¸­æå–åŸå¸‚ä¿¡æ¯
- âœ… **åŠ¨æ€ UI ç”Ÿæˆ** - åç«¯åŠ¨æ€ç”Ÿæˆ React å¤©æ°”å¡ç‰‡ç»„ä»¶
- âœ… **å¤šç§è¡¨è¾¾æ”¯æŒ** - æ”¯æŒå„ç§ä¸­æ–‡å¤©æ°”æŸ¥è¯¢è¡¨è¾¾æ–¹å¼
- âœ… **æ—  LLM ä¾èµ–** - ä½¿ç”¨é™æ€æ•°æ®ï¼Œå¿«é€Ÿå“åº”
- âœ… **å“åº”å¼è®¾è®¡** - Tailwind CSS ç¾è§‚ç•Œé¢
- âœ… **å®Œæ•´æµ‹è¯•** - å…¨é¢çš„å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–
```bash
# ä½¿ç”¨ uvï¼ˆæ¨èï¼‰
uv sync

# æˆ–ä½¿ç”¨ pip
pip install -e . "langgraph-cli[inmem]"
```

### è¿è¡Œæ¼”ç¤º
```bash
# æŸ¥çœ‹åŠŸèƒ½æ¼”ç¤º
uv run python examples/weather_demo.py

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
uv run langgraph dev
```

### åŸºæœ¬ä½¿ç”¨
```python
from langchain_core.messages import HumanMessage
from agent.graph import graph, State

# åˆ›å»ºç”¨æˆ·æŸ¥è¯¢
state = State(
    messages=[HumanMessage(content="åŒ—äº¬å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ")],
    ui=[]
)

# è°ƒç”¨ agent
result = await graph.ainvoke(state, {"configurable": {}})

# è·å–ç»“æœ
ai_message = result["messages"][-1].content  # AI å›å¤
ui_data = result["ui"][-1]["props"]          # UI ç»„ä»¶æ•°æ®
```

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
.
â”œâ”€â”€ src/agent/           # æ ¸å¿ƒ Agent ä»£ç 
â”‚   â”œâ”€â”€ graph.py         # ä¸»è¦ graph å®šä¹‰å’Œå¤©æ°”èŠ‚ç‚¹
â”‚   â””â”€â”€ ui.tsx          # React UI ç»„ä»¶
â”œâ”€â”€ tests/              # æµ‹è¯•å¥—ä»¶
â”‚   â”œâ”€â”€ unit_tests/     # å•å…ƒæµ‹è¯•
â”‚   â””â”€â”€ integration_tests/ # é›†æˆæµ‹è¯•
â”œâ”€â”€ examples/           # ç¤ºä¾‹å’Œæ¼”ç¤º
â”‚   â””â”€â”€ weather_demo.py # åŠŸèƒ½æ¼”ç¤ºè„šæœ¬
â””â”€â”€ docs/              # é¡¹ç›®æ–‡æ¡£
    â”œâ”€â”€ features/      # åŠŸèƒ½æ–‡æ¡£
    â””â”€â”€ testing/       # æµ‹è¯•æ–‡æ¡£
```

## ğŸ’¬ æ”¯æŒçš„æŸ¥è¯¢æ–¹å¼

### ç›´æ¥åŸå¸‚æŸ¥è¯¢
- "åŒ—äº¬å¤©æ°”"
- "ä¸Šæµ·çš„æ¸©åº¦"
- "æ·±åœ³æ°”å€™"

### è¯¢é—®æ¨¡å¼
- "åŒ—äº¬çš„å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ"
- "ä¸Šæµ·å¤©æ°”å¦‚ä½•ï¼Ÿ"
- "æ·±åœ³çš„æ°”å€™æ€æ ·ï¼Ÿ"

### æŸ¥è¯¢æ¨¡å¼
- "æŸ¥è¯¢åŒ—äº¬çš„å¤©æ°”"
- "äº†è§£ä¸Šæµ·å¤©æ°”"
- "çŸ¥é“æ·±åœ³çš„æ°”å€™"

### æ—¶é—´æ¨¡å¼
- "ä»Šå¤©åŒ—äº¬å¤©æ°”"
- "æ˜å¤©ä¸Šæµ·çš„æ¸©åº¦"
- "ç°åœ¨æ·±åœ³å¤©æ°”"

## ğŸ§ª æµ‹è¯•

```bash
# ä½¿ç”¨ make å‘½ä»¤ï¼ˆæ¨èï¼Œè‡ªåŠ¨ä¼˜å…ˆä½¿ç”¨ uvï¼‰
make test                    # è¿è¡Œæ‰€æœ‰å•å…ƒæµ‹è¯•
make integration_tests       # è¿è¡Œé›†æˆæµ‹è¯•
make test_watch             # ç›‘è§†æ¨¡å¼è¿è¡Œæµ‹è¯•

# è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
make test TEST_FILE=tests/unit_tests/test_message_parsing.py

# ç›´æ¥ä½¿ç”¨ uv æˆ– python
uv run pytest tests/unit_tests/ -v          # ä½¿ç”¨ uvï¼ˆæ¨èï¼‰
python -m pytest tests/unit_tests/ -v       # ä½¿ç”¨ python
```

## ğŸ¨ UI ç»„ä»¶

å¤©æ°” agent ç”Ÿæˆçš„ UI ç»„ä»¶åŒ…å«ï¼š
- ğŸ“ åŸå¸‚åç§°
- ğŸŒ¡ï¸ æ¸©åº¦ä¿¡æ¯
- â˜ï¸ å¤©æ°”çŠ¶å†µ
- ğŸ’§ æ¹¿åº¦æ•°æ®
- ğŸ’¨ é£é€Ÿä¿¡æ¯
- ğŸ“ å¤©æ°”æè¿°

å‰ç«¯å¯ä»¥ä½¿ç”¨ `LoadExternalComponent` æ¸²æŸ“ï¼š
```tsx
import { LoadExternalComponent } from "@langchain/langgraph-sdk/react-ui";

<LoadExternalComponent 
  stream={thread} 
  message={ui} 
  fallback={<div>Loading...</div>} 
/>
```

## ğŸ“Š æ”¯æŒçš„åŸå¸‚

å½“å‰æ”¯æŒä»¥ä¸‹åŸå¸‚çš„å¤©æ°”æŸ¥è¯¢ï¼š
- åŒ—äº¬ - æ™´å¤©ï¼Œ22Â°C
- ä¸Šæµ· - å¤šäº‘ï¼Œ18Â°C  
- æ·±åœ³ - å°é›¨ï¼Œ26Â°C
- å¹¿å· - é˜´å¤©ï¼Œ24Â°C
- æ­å· - æ™´å¤©ï¼Œ20Â°C

## ğŸ”§ é…ç½®

### LangGraph é…ç½® (langgraph.json)
```json
{
  "graphs": {
    "agent": "./src/agent/graph.py:graph"
  },
  "ui": {
    "agent": "./src/agent/ui.tsx"
  }
}
```

### ç¯å¢ƒé…ç½®
å¤åˆ¶ `.env.example` åˆ° `.env` å¹¶é…ç½®ç›¸å…³å‚æ•°ï¼ˆå¯é€‰ï¼‰ã€‚

## ğŸ“š è¯¦ç»†æ–‡æ¡£

- [Generative UI åŠŸèƒ½æŒ‡å—](docs/features/generative-ui-guide.md) - è¯¦ç»†çš„ UI ç»„ä»¶å¼€å‘æŒ‡å—
- [æ¶ˆæ¯è§£æåŠŸèƒ½](docs/features/message-parsing.md) - è‡ªç„¶è¯­è¨€å¤„ç†å®ç°è¯¦è§£
- [æµ‹è¯•ç»“æ„æ–‡æ¡£](docs/testing/test-structure.md) - æµ‹è¯•å¥—ä»¶ç»“æ„å’Œä½¿ç”¨è¯´æ˜

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°åŸå¸‚
1. åœ¨ `src/agent/graph.py` çš„ `WEATHER_DATA` ä¸­æ·»åŠ åŸå¸‚æ•°æ®
2. æ›´æ–°æµ‹è¯•ç”¨ä¾‹
3. è¿è¡Œæµ‹è¯•éªŒè¯

### æ‰©å±•è§£ææ¨¡å¼
1. åœ¨ `extract_city_from_message()` å‡½æ•°ä¸­æ·»åŠ æ–°çš„æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼
2. æ·»åŠ å¯¹åº”çš„å•å…ƒæµ‹è¯•
3. éªŒè¯åŠŸèƒ½æ­£ç¡®æ€§

### è‡ªå®šä¹‰ UI ç»„ä»¶
1. ä¿®æ”¹ `src/agent/ui.tsx` ä¸­çš„ `WeatherComponent`
2. ä½¿ç”¨ Tailwind CSS è¿›è¡Œæ ·å¼è®¾è®¡
3. ç¡®ä¿ä¸åç«¯æ•°æ®ç»“æ„åŒ¹é…

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤æ›´æ”¹
4. è¿è¡Œæµ‹è¯•ç¡®ä¿é€šè¿‡
5. æäº¤ Pull Request

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ LICENSE æ–‡ä»¶

## ğŸ™‹â€â™‚ï¸ æ”¯æŒ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·ï¼š
1. æŸ¥çœ‹æ–‡æ¡£ç›®å½•ä¸­çš„è¯¦ç»†æŒ‡å—
2. è¿è¡Œç¤ºä¾‹è„šæœ¬äº†è§£ç”¨æ³•
3. æŸ¥çœ‹æµ‹è¯•ç”¨ä¾‹ä½œä¸ºå‚è€ƒ
4. æäº¤ Issue åé¦ˆé—®é¢˜

---

**å¼€å§‹ä½¿ç”¨**: `uv run python examples/weather_demo.py` ğŸš€
